简介

### 小程序的架构

小程序采用的是一种分离的渲染机制，分别在 WebView 线程和 JavaScriptCore 线程中运行

双线程架构，逻辑层和渲染层是分开的，运行在两个不同的线程中（js不能直接访问dom）

- 逻辑层运行在 JavaScriptCore 中，负责数据处理和事件处理等逻辑
- 渲染层在 WebView 中，负责页面的渲染
- 两个线程通过一个数据桥进行通信，js 线程将需要渲染的数据发送到渲染线程，然后由渲染线程根据这些数据来渲染页面
- 性能提升：由于小程序的渲染过程并不依赖于js，因此即使js线程发生阻塞，页面的渲染也不会受到影响。**这种机制有利于提高渲染效率，减少卡顿，提升用户体验**
- 小程序由于并不支持直接操作 DOM，因此所有的页面更新都是通过数据驱动的，这使得代码更为简洁，易于维护

## QAQ

1. 为什么双线程架构

   小程序的双线程架构将逻辑层和视图层分开，逻辑层运行在JavaScript环境中，而视图层则运行在WebView中。这种隔离机制使得开发者无法直接操作DOM，从而避免了直接操作DOM可能带来的安全隐患和性能问题。这种设计不仅提高了小程序的安全性，还增强了其稳定性和可控性。

2. 11